<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A coffeedonate page.">
    <link rel="shortcut icon" href="favicon.png"> <!-- TODO: change favicon -->

    <title>Donate me coffee!</title>
    <!-- TODO: extend readme -->
    <!-- TODO: maybe change page title? -->

    <!-- Bootstrap core CSS -->
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href="main.css" rel="stylesheet"> <!-- TODO: move all css to main.css - no more inline css -->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- TODO: form is messed up on IE -->
</head>

<body>

<div class="mainframe">
    <div class="header">
        <div class="container">
            <div class="row-container">
                <div class="row">
                    <div class="col-md-2">
                        <img class="avatar" class="img-circle" src="https://avatars0.githubusercontent.com/u/668674?s=100"><!-- CUSTOM: Insert avatar url here -->
                    </div>
                    <div class="col-md-7">
                        <h1>
                            Daniel Bugl<!-- CUSTOM: Insert your name here -->
                            <span class="username">
                                (omnidan)<!-- CUSTOM: Insert github username here -->
                            </span>
                        </h1>
                        <h4>
                            software architect and web developer/designer<!-- CUSTOM: Insert tagline here -->
                        </h4>
                    </div>
                    <div class="col-md-3" style="margin-top: 20px;">
                        <a href="https://github.com/omnidan/coffeedonate#setup">
                            <button type="button" class="btn btn-primary btn-lg" style="white-space: normal;">
                                Get your own coffee based donation page!
                            </button>
                        </a><!-- CUSTOM: You can remove this a-block if you want -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="jumbotron">
        <div class="container">
            <div class="row-container">
                <div class="row">
                    <div class="col-md-2">
                        <i id="main-coffee" class="fa fa-coffee fa-5x"></i>
                        <div class="input-group" style="max-width: 110px;">
                            <input id="cup-amount" type="text" class="form-control" placeholder="1" style="text-align: right;">
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-default" id="add-cup">
                                    <i class="fa fa-plus"></i> <i class="fa fa-coffee"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="moar-coffee" style="display: none;">

                    </div>
                    <div id="much-moar-coffee" style="display: none;">
                        <span id="coffee-cups"></span> x <i class="fa fa-coffee"></i>
                        <div class="price-list">
                            <i class="fa fa-coffee"></i> &aacute; <span id="price-eur"></span> <i class='fa fa-euro'></i><br />
                            <i class="fa fa-coffee"></i> &aacute; <span id="price-usd"></span> <i class='fa fa-dollar'></i><br />
                            <i class="fa fa-coffee"></i> &aacute; <span id="price-btc"></span> <i class='fa fa-btc'></i><br />
                        </div>
                    </div>
                    <div id="main-box" class="col-md-10">
                        <h1>Buy coffee for me...</h1>
                        <span id="price-total-eur"></span> <i class='fa fa-euro'></i> |
                        <span id="price-total-usd"></span> <i class='fa fa-dollar'></i> |
                        <span id="price-total-btc"></span> <i class='fa fa-btc'></i> |
                        <span id="total-cups"></span> <i class='fa fa-coffee'></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="contents">
        <div class="container">
            <div class="row">
                <!-- TODO: improve these texts -->
                <div class="col-md-4">
                    <h2>...with Bitcoin!</h2>
                    <p>
                        <script src="js/bitdonate.js"></script>
                        <script>
                            CoinWidgetCom.go({
                                wallet_address: "1J5eKsrAcPPLv5gPxSjSUkXnbJpkhndFgA" <!-- CUSTOM: Insert bitcoin address here -->
                                , currency: "bitcoin"
                                , counter: "hide"
                                , alignment: "bl"
                                , qrcode: true
                                , auto_show: false
                                , lbl_button: "Donate coffee"
                                , lbl_address: "My Bitcoin Address:"
                                , lbl_count: "donations"
                                , lbl_amount: "BTC"
                            });
                        </script>
                        <!-- CUSTOM: Insert bitcoin button here -->
                    </p>
                    <p>
                        If you have a bitcoin wallet, you can donate me some with the information above. If you want to
                        donate me a coffee, make sure to enter the bitcoin amount in the box above.
                    </p>
                </div>
                <div class="col-md-4">
                    <h2>...with Paypal!</h2>
                    <p>
                        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                            <input type="hidden" name="cmd" value="_s-xclick">
                            <input type="hidden" name="hosted_button_id" value="BTGWUZVJF6X3G">
                            <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                            <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                        </form>
                        <!-- CUSTOM: Insert paypal button here -->
                    </p>
                    <p>
                        If you don't have bitcoin, you can donate me money for coffee via Paypal. Please note that
                        paypal charges fees for donations, so if you can, use bitcoin.
                    </p>
                </div>
                <div class="col-md-4">
                    <h2>...with Flattr!</h2>
                    <p>
                        <a href="https://flattr.com/submit/auto?user_id=DanielBugl&url=http%3A%2F%2Fomnidan.github.io%2Fcoffeedonate%2F" target="_blank"><img src="//api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0"></a>
                        <!-- CUSTOM: Insert flattr button here -->
                    </p>
                    <p>
                        Just press the button above to donate me some money via flattr!
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="container">
            <p class="text-muted">
                <a href="https://github.com/omnidan/coffeedonate">coffeedonate</a> is built with lots of &hearts;
                by Daniel Bugl (<a href="https://github.com/omnidan">omnidan</a>)
            </p>
        </div>
    </div>
</div>

<!-- JavaScript placed at the end of the document so the pages load faster -->
<script src="js/jquery-2.0.3.min.js"></script>
<script src="js/bitcoinprices.js"></script>
<!-- TODO: add configuration and let users configurate their buttons with javascript -->
<!-- TODO: maybe let them configure everything else with js too? -->

<script>
    // TODO: clean up javascript
    var coffee = 1;

    function addCup() {
        if (coffee == 1) {
            $("#moar-coffee").addClass('col-md-2');
            $("#main-box").removeClass('col-md-10');
            $("#main-box").addClass('col-md-8');

            $("#moar-coffee").show();
        }

        if (coffee <= 10) {
            $("#moar-coffee").append('<i class="fa fa-coffee"></i> ');
        } else {
            $("#moar-coffee").empty();
            $("#moar-coffee").removeClass('col-md-2');
            $("#moar-coffee").hide();

            $("#much-moar-coffee").show();
            $("#much-moar-coffee").addClass('col-md-2');
            $("#coffee-cups").html(coffee);
        }

        coffee += 1;
    }

    function addCoffee() {
        var cups = $("#cup-amount").val();

        if (cups == "") cups = "1";

        cups = parseInt(cups);

        if (isNaN(cups)) cups = 1;

        console.log(cups);

        for (var i=0; i<cups; i++) addCup();

        updatePrices();
    }

    function updatePrices() {
        $('#price-eur').html((2.00).toFixed(2));
        $('#price-usd').html(bitcoinprices.convert(2.00, 'EUR', 'USD').toFixed(2));
        $('#price-btc').html(bitcoinprices.convert(2.00, 'EUR', 'BTC').toFixed(5));

        $('#price-total-eur').html((2.00 * coffee).toFixed(2));
        $('#price-total-usd').html(bitcoinprices.convert(2.00 * coffee, 'EUR', 'USD').toFixed(2));
        $('#price-total-btc').html(bitcoinprices.convert(2.00 * coffee, 'EUR', 'BTC').toFixed(5));
        $('#total-cups').html(coffee);
    }

    $(document).ready(function() {
        bitcoinprices.init({

            // Where we get bitcoinaverage data
            url: "https://api.bitcoinaverage.com/ticker/all",

            // Which of bitcoinaverages value we use to present prices
            marketRateVariable: "24h_avg",

            // Which currencies are in shown to the user
            currencies: ["BTC", "USD", "EUR"],

            // Special currency symbol artwork
            symbols: {
                "BTC": "<i class='fa fa-btc'></i>"
            },

            // Which currency we show user by the default if
            // no currency is selected
            defaultCurrency: "BTC",

            // How the user is able to interact with the prices
            ux : {
                // Make everything with data-btc-price HTML attribute clickable
                clickPrices : false,

                // Build Bootstrap dropdown menu for currency switching
                menu : false
            }
        });

        $(document).bind('marketdataavailable', function () {
            updatePrices();
        });

        $('#main-coffee').click(function () {
            addCoffee();
        });

        $('#add-cup').click(function () {
            addCoffee();
        });
    });
    // TODO: cache moar
</script>

</body>
</html>
